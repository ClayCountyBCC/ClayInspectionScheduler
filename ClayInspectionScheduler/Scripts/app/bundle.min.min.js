/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   3.2.2+35df15ea
 */
(function(){"use strict";function dt(n){return"function"==typeof n||"object"==typeof n&&null!==n}function rt(n){return"function"==typeof n}function gt(n){d=n}function ni(n){r=n}function ti(){return function(){process.nextTick(u)}}function ii(){return function(){at(u)}}function ri(){var n=0,i=new bt(u),t=document.createTextNode("");return i.observe(t,{characterData:!0}),function(){t.data=n=++n%2}}function ui(){var n=new MessageChannel;return n.port1.onmessage=u,function(){n.port2.postMessage(0)}}function ut(){return function(){setTimeout(u,1)}}function u(){for(var t,i,n=0;e>n;n+=2)t=o[n],i=o[n+1],t(i),o[n]=void 0,o[n+1]=void 0;e=0}function fi(){try{var t=require,n=t("vertx");return at=n.runOnLoop||n.runOnContext,ii()}catch(i){return ut()}}function ei(n,t){var e=this,i=new this.constructor(f),u,o;return void 0===i[y]&&ht(i),u=e._state,u?(o=arguments[u-1],r(function(){st(u,i,o,e._result)})):w(e,i,n,t),i}function oi(n){var i=this,t;return n&&"object"==typeof n&&n.constructor===i?n:(t=new i(f),c(t,n),t)}function f(){}function si(){return new TypeError("You cannot resolve a promise with itself")}function hi(){return new TypeError("A promises callback cannot return that same promise.")}function ft(n){try{return n.then}catch(t){return p.error=t,p}}function ci(n,t,i,r){try{n.call(t,i,r)}catch(u){return u}}function li(t,u,f){r(function(t){var r=!1,e=ci(f,u,function(n){r||(r=!0,u!==n?c(t,n):i(t,n))},function(i){r||(r=!0,n(t,i))},"Settle: "+(t._label||" unknown promise"));!r&&e&&(r=!0,n(t,e))},t)}function ai(t,r){r._state===a?i(t,r._result):r._state===h?n(t,r._result):w(r,void 0,function(n){c(t,n)},function(i){n(t,i)})}function et(t,r,u){r.constructor===t.constructor&&u===g&&constructor.resolve===nt?ai(t,r):u===p?n(t,p.error):void 0===u?i(t,r):rt(u)?li(t,r,u):i(t,r)}function c(t,r){t===r?n(t,si()):dt(r)?et(t,r,ft(r)):i(t,r)}function vi(n){n._onerror&&n._onerror(n._result);b(n)}function i(n,t){n._state===s&&(n._result=t,n._state=a,0!==n._subscribers.length&&r(b,n))}function n(n,t){n._state===s&&(n._state=h,n._result=t,r(vi,n))}function w(n,t,i,u){var f=n._subscribers,e=f.length;n._onerror=null;f[e]=t;f[e+a]=i;f[e+h]=u;0===e&&n._state&&r(b,n)}function b(n){var i=n._subscribers,e=n._state,r,u,f,t;if(0!==i.length){for(f=n._result,t=0;t<i.length;t+=3)r=i[t],u=i[t+e],r?st(e,r,u,f):u(f);n._subscribers.length=0}}function ot(){this.error=null}function yi(n,t){try{return n(t)}catch(i){return tt.error=i,tt}}function st(t,r,u,f){var e,l,o,v,y=rt(u);if(y){if(e=yi(u,f),e===tt?(v=!0,l=e.error,e=null):o=!0,r===e)return void n(r,hi())}else e=f,o=!0;r._state!==s||(y&&o?c(r,e):v?n(r,l):t===a?i(r,e):t===h&&n(r,e))}function pi(t,i){try{i(function(n){c(t,n)},function(i){n(t,i)})}catch(r){n(t,r)}}function wi(){return kt++}function ht(n){n[y]=kt++;n._state=void 0;n._result=void 0;n._subscribers=[]}function bi(n){return new lt(this,n).promise}function ki(n){var t=this;return new t(yt(n)?function(i,r){for(var f=n.length,u=0;f>u;u++)t.resolve(n[u]).then(i,r)}:function(n,t){t(new TypeError("You must pass an array to race."))})}function di(t){var r=this,i=new r(f);return n(i,t),i}function gi(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");}function nr(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}function t(n){this[y]=wi();this._result=this._state=void 0;this._subscribers=[];f!==n&&("function"!=typeof n&&gi(),this instanceof t?pi(this,n):nr())}function l(t,r){this._instanceConstructor=t;this.promise=new t(f);this.promise[y]||ht(this.promise);yt(r)?(this._input=r,this.length=r.length,this._remaining=r.length,this._result=new Array(this.length),0===this.length?i(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&i(this.promise,this._result))):n(this.promise,tr())}function tr(){return new Error("Array Methods must be provided an Array")}function ir(){var n,t;if("undefined"!=typeof global)n=global;else if("undefined"!=typeof self)n=self;else try{n=Function("return this")()}catch(i){throw new Error("polyfill failed because global object is unavailable in this environment");}t=n.Promise;(!t||"[object Promise]"!==Object.prototype.toString.call(t.resolve())||t.cast)&&(n.Promise=it)}var ct,lt,k,v;ct=Array.isArray?Array.isArray:function(n){return"[object Array]"===Object.prototype.toString.call(n)};var at,d,vt,yt=ct,e=0,r=function(n,t){o[e]=n;o[e+1]=t;e+=2;2===e&&(d?d(u):vt())},pt="undefined"!=typeof window?window:void 0,wt=pt||{},bt=wt.MutationObserver||wt.WebKitMutationObserver,rr="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),ur="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,o=new Array(1e3);vt=rr?ti():bt?ri():ur?ui():void 0===pt&&"function"==typeof require?fi():ut();var g=ei,nt=oi,y=Math.random().toString(36).substring(16),s=void 0,a=1,h=2,p=new ot,tt=new ot,kt=0,fr=bi,er=ki,or=di,it=t;t.all=fr;t.race=er;t.resolve=nt;t.reject=or;t._setScheduler=gt;t._setAsap=ni;t._asap=r;t.prototype={constructor:t,then:g,"catch":function(n){return this.then(null,n)}};lt=l;l.prototype._enumerate=function(){for(var t=this.length,i=this._input,n=0;this._state===s&&t>n;n++)this._eachEntry(i[n],n)};l.prototype._eachEntry=function(n,t){var i=this._instanceConstructor,e=i.resolve,r,u;e===nt?(r=ft(n),r===g&&n._state!==s?this._settledAt(n._state,t,n._result):"function"!=typeof r?(this._remaining--,this._result[t]=n):i===it?(u=new i(f),et(u,n,r),this._willSettleAt(u,t)):this._willSettleAt(new i(function(t){t(n)}),t)):this._willSettleAt(e(n),t)};l.prototype._settledAt=function(t,r,u){var f=this.promise;f._state===s&&(this._remaining--,t===h?n(f,u):this._result[r]=u);0===this._remaining&&i(f,this._result)};l.prototype._willSettleAt=function(n,t){var i=this;w(n,void 0,function(n){i._settledAt(a,t,n)},function(n){i._settledAt(h,t,n)})};k=ir;v={Promise:it,polyfill:k};"function"==typeof define&&define.amd?define(function(){return v}):"undefined"!=typeof module&&module.exports?module.exports=v:"undefined"!=typeof this&&(this.ES6Promise=v);k()}).call(this);